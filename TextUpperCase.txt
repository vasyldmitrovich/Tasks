Preface To the Reader In late 1995, the Java programming language burst onto the Internet scene and gained instantcelebrity status. THE PROMISE OF JAVA TECHNOLOGY WAS THAT IT WOULD BECOME THE UNIVERSAL GLUE THAT CONNECTS USERS WITH INFORMATION WHEREVER IT COMES FROM—WEB SERVERS, DATABASES, INFORMATION PROVIDERS, OR ANY OTHER IMAGINABLE SOURCE. Indeed, Java is in a unique position to fulfill this promise. IT IS AN EXTREMELY SOLIDLY ENGINEERED LANGUAGE THAT HAS GAINED ACCEPTANCE BY ALL MAJOR VENDORS, EXCEPT FOR MICROSOFT. Its built-in security and safety features are reassuring both to programmers and to the users of Java programs. JAVA EVEN HAS BUILT-IN SUPPORT FOR ADVANCED PROGRAMMING TASKS, SUCH AS NETWORK PROGRAMMING, DATABASE CONNECTIVITY, AND MULTITHREADING. Since 1995, eight major revisions of the Java Development Kit have been released. OVER THE COURSE OF THE LAST 17 YEARS, THE APPLICATION PROGRAMMING INTERFACE API HAS GROWN FROM ABOUT 200 TO OVER 3,000 CLASSES. The API now spans such diverse areas as user interface construction, database management, internationalization, security, and XML processing. THE BOOK YOU HAVE IN YOUR HANDS IS THE FIRST VOLUME OF THE NINTH EDITION OF CORE JAVA™. Each edition closely followed a release of the Java Development Kit, and each time, we rewrote the book to take advantage of the newest Java features. THIS EDITION HAS BEEN UPDATED TO REFLECT THE FEATURES OFJAVA STANDARD EDITION SE 7. As with the previous editions of this book, we still target serious programmers who want to put Java to work on real projects. WE THINK OF YOU, OUR READER, AS A PROGRAMMER WITH A SOLID BACKGROUND IN A PROGRAMMING LANGUAGE OTHER THAN JAVA, AND WE ASSUME THAT YOU DON’T LIKE BOOKS FILLED WITH TOY EXAMPLES SUCH AS TOASTERS, ZOO ANIMALS, OR “NERVOUS TEXT”. You won’t find any of these in our book. OUR GOAL IS TO ENABLE YOU TO FULLY UNDERSTAND THE JAVA LANGUAGE AND LIBRARY, NOT TO GIVE YOU AN ILLUSION OF UNDERSTANDING. In this book you will find lots of sample code demonstrating almost every language and library feature that we discuss. WE KEEP THE SAMPLE PROGRAMS PURPOSEFULLY SIMPLE TO FOCUS ON THE MAJOR POINTS, BUT, FOR THE MOST PART, THEY ARE N’T FAKE AND THEY DON’T CUT CORNERS. They should make good starting points for your own code. 1.4. A Short History of Java This section gives a short history of Java’s evolution. IT IS BASED ON VARIOUS PUBLISHED SOURCES MOST IMPORTANTLY AN INTERVIEW WITH JAVA’S CREATORS IN THE JULY 1995 ISSUE OF SUNWORLD’S ONLINE MAGAZINE. Java goes back to 1991, when a group of Sun engineers, led by Patrick Naughton and JamesGosling a Sun Fellow and all-around computer wizard, wanted to design a small computer language that could be used for consumer devices like cable TV switch boxes. SINCE THESE DEVICES DO NOT HAVE A LOT OF POWER OR MEMORY, THE LANGUAGE HAD TO BE SMALL AND GENERATE VERY TIGHT CODE. Also, asdifferent manufacturers may choose different central processing units CPUs, it was important that the language not be tied to any single architecture. THE PROJECT WAS CODE-NAMED “GREEN.” THE REQUIREMENTS FOR SMALL, TIGHT, AND PLATFORM-NEUTRAL CODE LED THE TEAM TO RESURRECT THE MODEL THAT SOME PASCAL IMPLEMENTATIONS TRIED IN THE EARLY DAYS OF PCS. Niklaus Wirth, the inventor of Pascal, had pioneered the design of a portable language that generated intermediate code for a hypothetical machine. SUCH MACHINES ARE OFTEN CALLED VIRTUAL—HENCE THE JAVA VIRTUAL MACHINE, OR JVM. This intermediate code could then be used on any machine that had the correct interpreter. THE GREEN PROJECT ENGINEERS USED A VIRTUAL MACHINE AS WELL, WHICH SOLVED THEIR MAIN PROBLEM. The Sun people, however, came from a UNIX background, so they based their language on C++ rather than Pascal. IN PARTICULAR, THEY MADE THE LANGUAGE OBJECT-ORIENTED RATHER THAN PROCEDURE-ORIENTED. But, as Gosling says in the interview, “All along, the language was a tool, not the end.”. GOSLING DECIDED TO CALL HIS LANGUAGE “OAK” PRESUMABLY BECAUSE HE LIKED THE LOOK OF AN OAK TREE THAT WAS RIGHT OUTSIDE HIS WINDOW AT SUN. The people at Sun later realized that Oak was the name of an existing computer language, so they changed the name to Java. THIS TURNED OUT TO BE AN INSPIRED CHOICE. In 1992, the Green project delivered its first product, called 7. IT WAS AN EXTREMELY INTELLIGENT REMOTE CONTROL. It had the power of a SPARC station in a box that was 6 inches by 4 inches by 4inches. UNFORTUNATELY, NO ONE WAS INTERESTED IN PRODUCING THIS AT SUN, AND THE GREEN PEOPLE HAD TO FIND OTHER WAYS TO MARKET THEIR TECHNOLOGY. However, none of the standard consumer electronics companies were interested either. THE GROUP THEN BID ON A PROJECT TO DESIGN A CABLE TV BOX THAT COULD DEAL WITH NEW CABLE SERVICES SUCH AS VIDEO-ON-DEMAND. They did not get the contract. AMUSINGLY, THE COMPANY THAT DID WAS LED BY THE SAME JIM CLARK WHO STARTED NETSCAPE—A COMPANY THAT DID MUCH TO MAKE JAVA SUCCESSFUL. The Green project with a new name of First Person, Inc spent all of 1993 and half of 1994 looking for people to buy its technology. NO ONE WAS FOUND. Patrick Naughton, one of the founders of the group and the person who ended up doing most of the marketing, claims to have accumulated 300,000 air miles in trying to sell the technology. FIRST PERSON WAS DISSOLVED IN 1994. While all of this was going on at Sun, the World Wide Web part of the Internet was growing bigger and bigger. THE KEY TO THE WORLD WIDE WEB WAS THE BROWSER TRANSLATING THE HYPERTEXT PAGE TO THE SCREEN. In 1994, most people were using Mosaic, a noncommercial web browser that came out of the supercomputing center at the University of Illinois in 1993. MOSAIC WAS PARTIALLY WRITTEN BY MARC ANDREESSEN AS AN UNDERGRADUATE STUDENT ON A WORK-STUDY PROJECT, FOR $6.85 AN HOUR. He moved on to fame and fortune as one of the cofounders and the chief of technology at Netscape. IN THE SUN WORLD INTERVIEW, GOSLING SAYS THAT IN MID-1994, THE LANGUAGE DEVELOPERS REALIZED THAT WE COULD BUILD A REAL COOL BROWSER. It was one of the few things in the client/server mainstream that needed some of the weird things we’d done: architecture-neutral, real-time, reliable, secure—issues that weren’t terribly important in the workstation world. SO WE BUILT A BROWSER. The actual browser was built by Patrick Naughton and Jonathan Payne and evolved into the Hot Java browser. THE HOT JAVA BROWSER WAS WRITTEN IN JAVA TO SHOW OFF THE POWER OF JAVA. But the builders also had in mind the power of what we now call applets, so they made the browser capable of executing code inside web pages. THIS “PROOF OF TECHNOLOGY” WAS SHOWN AT SUN WORLD’95 ON MAY23, 1995, AND INSPIRED THE JAVA CRAZE THAT CONTINUES TODAY. Sun released the first version of Java in early 1996. PEOPLE QUICKLY REALIZED THAT JAVA 1.0 WAS NOTGOING TO CUT IT FOR SERIOUS APPLICATION DEVELOPMENT. Sure, you could use Java 1.0 to make a nervous text applet that moved text randomly around in a canvas. BUT YOU COULDN’T EVEN PRINT IN JAVA 1.0. Tobe blunt, Java 1.0 was not ready for prime time. ITS SUCCESSOR, VERSION 1.1, FILLED IN THE MOST OBVIOUS GAPS, GREATLY IMPROVED THE REFLECTION CAPABILITY, AND ADDED A NEW EVENT MODEL FOR GUI PROGRAMMING. It was still rather limited, though. THE BIG NEWS OF THE 1998 JAVA ONE CONFERENCE WAS THE UPCOMING RELEASE OF JAVA 1.2, WHICH REPLACED THE EARLY TOY LIKE GUI AND GRAPHICS TOOL KITS WITH SOPHISTICATED SCALABLE VERSIONS AND CAME A LOT CLOSER TO THE PROMISE OF “WRITE ONCE, RUN ANYWHERE THAN ITS PREDECESSORS. Three days after its release in December 1998, Sun’s marketing department changed the name to the catchy Java2 Standard Edition Software Development Kit Versions 1.2. BESIDES THE STANDARD EDITION, TWO OTHER EDITIONS WERE INTRODUCED: THE MICRO EDITION FOR EMBEDDED DEVICES SUCH AS CELL PHONES, AND THE ENTERPRISE EDITION FOR SERVER-SIDE PROCESSING. This book focuses on the Standard Edition. VERSIONS 1.3 AND 1.4 OF THE STANDARD EDITION ARE INCREMENTAL IMPROVEMENTS OVER THE INITIAL JAVA 2RELEASE, WITH AN EVER-GROWING STANDARD LIBRARY, INCREASED PERFORMANCE, AND, OF COURSE, QUITE A FEW BUG FIXES. During this time, much of the initial hype about Java applets and client-side applications abated, but Java became the platform of choice for server-side applications. VERSION 5.0 WAS THE FIRST RELEASE SINCE VERSION 1.1 THAT UPDATED THE JAVA LANGUAGE IN SIGNIFICANT WAYS. This version was originally numbered 1.5, but the version number jumped to 5.0 at the 2004 JavaOne conference. AFTER MANY YEARS OF RESEARCH, GENERIC TYPES ROUGHLY COMPARABLE TO C++ TEMPLATES HAVE BEEN ADDED THE CHALLENGE WAS TO ADD THIS FEATURE WITHOUT REQUIRING CHANGES IN THE VIRTUAL MACHINE. Several other useful language features were inspired by C#: a “for each” loop, autoboxing, and metadata. VERSION 6 WITHOUT THE .0 SUFFIX WAS RELEASED AT THE END OF 2006. Again, there are no language changes but additional performance improvements and library enhancements. AS DATA CENTERS INCREASINGLY RELIED ON COMMODITY HARDWARE INSTEAD OF SPECIALIZED SERVERS, SUN MICRO SYSTEMS FELL ON HARD TIMES AND WAS PURCHASED BY ORACLE IN 2009. Development of Java stalled for a long time. IN 2011, ORACLE RELEASED A NEW VERSION WITH SIMPLE ENHANCEMENTS AS JAVA 7, AND DECIDED TO DEFER MORE AMBITIOUS CHANGES TO JAVA 8, WHICH IS EXPECTED IN 2013. Table 1.1 shows the evolution of the Java language and library. AS YOU CAN SEE, THE SIZE OF THE APPLICATION PROGRAMMING INTERFACE API HAS GROWN TREMENDOUSLY.